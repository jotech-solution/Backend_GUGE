{% extends 'base.html' %}
{% load static %}

{% block title %}Territoires - Guge{% endblock %}

{% block content %}
<div class="page-header">
  <div class="page-block">
    <div class="row align-items-center">
      <div class="col-md-12">
        <div class="page-header-title">
          <h5 class="m-b-10">Gestion des Territoires</h5>
        </div>
        <ul class="breadcrumb">
          <li class="breadcrumb-item"><a href="/">Accueil</a></li>
          <li class="breadcrumb-item">Territoires</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <!-- Formulaire d'ajout -->
  <div class="col-md-4">
    <div class="card">
      <div class="card-header">
        <h5>Ajouter un Territoire</h5>
      </div>
      <div class="card-body">
        <form method="POST">
          {% csrf_token %}
          <div class="form-group mb-3">
            <label class="form-label">Province</label>
            <select name="province" class="form-select" required>
              <option value="">Sélectionner une province</option>
              {% for province in provinces %}
              <option value="{{ province.id }}">{{ province.name }} ({{ province.code }})</option>
              {% endfor %}
            </select>
          </div>
          <div class="form-group mb-3">
            <label class="form-label">Code</label>
            <input type="text" name="code" class="form-control" placeholder="Ex: TERR01" required>
          </div>
          <div class="form-group mb-3">
            <label class="form-label">Nom</label>
            <input type="text" name="name" class="form-control" placeholder="Ex: Territoire Sud" required>
          </div>
          <button type="submit" class="btn btn-primary w-100">Enregistrer</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Liste des territoires -->
  <div class="col-md-8">
    <div class="card">
      <div class="card-header">
        <h5>Liste des Territoires</h5>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover mb-0">
            <thead>
              <tr>
                <th>Province</th>
                <th>Code</th>
                <th>Nom</th>
              </tr>
            </thead>
            <tbody>
              {% for territory in territories %}
              <tr>
                <td>{{ territory.province.name }}</td>
                <td>{{ territory.code }}</td>
                <td>{{ territory.name }}</td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="3" class="text-center">Aucun territoire enregistré.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% include 'includes/pagination.html' with page_obj=territories %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
